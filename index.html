<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stone Paper Scissor Game</title>
    <style>
        body {text-align: center;}
    </style>
</head>
<body>
    <h1>Stone Paper Scissor Game</h1>

    <!--Button 1-->

    <button onclick="
    let computerChoice = generateComputerChoice();
    let resultMsg = getResult(`Stone`, computerChoice);
    showResult(`Stone`, computerChoice, resultMsg);
    ">Stone</button>
    
    <!--Button 2-->

    <button onclick="
    computerChoice = generateComputerChoice();
    resultMsg = getResult(`Paper`, computerChoice);
    showResult(`Paper`, computerChoice, resultMsg);
    ">Paper</button>

    <!--Button 3-->

    <button onclick="
    computerChoice = generateComputerChoice();
    resultMsg = getResult(`Scissor`, computerChoice);
    showResult(`Scissor`, computerChoice, resultMsg);
    ">Scissor</button>

    <!--Reset Button-->

    <button onclick="localStorage.clear()
        resetScore();
    ">Reset</button>

    <script>

        let scoreStr = localStorage.getItem(`Score`);
        let score;
        resetScore(scoreStr);

        function resetScore(scoreStr) {
            score = scoreStr ? JSON.parse(scoreStr) : {
                win: 0,
                lost: 0,
                tie: 0,
            };
            score.displayScore = function() {
                return `Won: ${score.win}, Lost: ${score.lost}, Tie: ${score.tie}`;
            };
        }

     function generateComputerChoice() {
        //this wil generate random number between 0 to 3
        let randomNumber = Math.random() * 3;
        if (randomNumber > 0 && randomNumber <= 1) { return `Stone`; }
        else if (randomNumber > 1 && randomNumber <= 2) { return `Paper`; }
        else { return `Scissor`; }
    }

    function getResult(userMove, computerMove) {
        if (userMove === `Stone`) {
            if (computerMove === `Scissor`) { score.win++; return `User Won` }
            else if (computerMove === `Stone`) { score.tie++; return `it's a tie` }
            else if (computerMove === `Paper`) { score.lost++; return `Computer has won` }
        }
        else if (userMove === `Paper`) {
            if (computerMove === `Stone`) { score.win++; return `User Won` }
            else if (computerMove === `Paper`) { score.tie++; return `it's a tie` }
            else if (computerMove === `Scissor`) { score.lost++; return `Computer has won` }
        }
        else {
            if (computerMove === `Paper`) { score.win++; return `User Won` }
            else if (computerMove === `Scissor`) { score.tie++; return `it's a tie` }
            else if (computerMove === `Stone`) { score.lost++; return `Computer has won` }
        }
    }

    function showResult(userMove, computerMove, result) {
        localStorage.setItem(`Score`, JSON.stringify(score))
        alert(`You have chosen ${userMove}. Computer choice is ${computerMove}

         ${result}

         ${score.displayScore()}`)
    }
    </script>
</body>
</html>
