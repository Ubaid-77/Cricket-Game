<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Cricket Game</title>
    <style>
        body {text-align: center;}
    </style>
</head>
<body>
    <h1>Bat Ball Stump Game</h1>

    <!--Button 1-->

    <button onclick="
    let computerChoice = generateComputerChoice();
    let resultMsg = getResult(`Bat`, computerChoice);
    showResult(`Bat`, computerChoice, resultMsg);
    ">Bat</button>
    
    <!--Button 2-->

    <button onclick="
    computerChoice = generateComputerChoice();
    resultMsg = getResult(`Ball`, computerChoice);
    showResult(`Ball`, computerChoice, resultMsg);
    ">Ball</button>

    <!--Button 3-->

    <button onclick="
    computerChoice = generateComputerChoice();
    resultMsg = getResult(`Stump`, computerChoice);
    showResult(`Stump`, computerChoice, resultMsg);
    ">Stump</button>

    <!--Button 3-->

    <button onclick="localStorage.clear()
        resetScore();
    ">Reset</button>

    <script>

        let scoreStr = localStorage.getItem(`Score`);
        let score;
        resetScore(scoreStr);

        function resetScore(scoreStr) {score = scoreStr ? JSON.parse(scoreStr) : {
            win: 0,
            lost: 0,
            tie: 0,
        };
            score.displayScore = function() 
            {return `Won: ${score.win}, Lost: ${score.lost}, Tie: ${score.tie}`;};
    }

        
        

     function generateComputerChoice() {
    //this wil generate random number between 0 to 3
    let randomNumber = Math.random()*3;
    if (randomNumber > 0 && randomNumber <= 1) { return `Bat`;}
    else if (randomNumber > 1 && randomNumber<= 2) { return `Ball`;}
    else { return `Stump`;}
    }

    function getResult(userMove, computerMove) {
        if (userMove === `Bat`) {
            if (computerMove === `Ball`) { score.win++; return`User Won`}
            else if (computerMove === `Bat`) { score.tie++; return `it's a tie`}
            else if (computerMove === `Stump`) { score.lost++; return `Computer has won`}}
        else if (userMove === `Ball`) {
            if (computerMove === `Stump`) { score.win++; return `User Won`}
            else if (computerMove === `Ball`) { score.tie++; return `it's a tie`}
            else if (computerMove === `Bat`) { score.lost++; return `Computer has won`}}
        else {
            if (computerMove === `Bat`) { score.win++; return `User Won`}
            else if (computerMove === `Stump`) { score.tie++; return `it's a tie`}
            else if (computerMove === `Ball`) { score.lost++; return `Computer has won`}}
    }

    function showResult(userMove, computerMove, result) 
     {
        localStorage.setItem(`Score`, JSON.stringify(score))
        alert(`You have chosen ${userMove}. Computer choice is ${computerMove}

         ${result}

         ${score.displayScore()}`)}
    </script>
</body>
</html>
